const popularCourses = [
    {
        "courseIndex": 1,
        "courseName": "Giải đề PE Prj301 | Fall 2023 | 9.5+",
        "courseImage": "./img/pe_prj_fall_2023.jpg",
        "courseIntro": "https://www.youtube.com/embed/M62l1xA5Eu8",
        "courseType": "Sell",
        "courseStudents": 8.750,
        "courseRate": 4.8,
        "coursePrice": "Free",
        "courseVideo": [
            {
                "chapterIndex": 0,
                "chapterTitle": "Giải đề PE Prj301 - 2023",
                "chapterVideo": [
                    {
                        "indexVideo": 0,
                        "nameVideo": "Giải đề PE Prj301 | Fall 2023 | 9.5+",
                        "lengthVideo": 89.5,
                        "linkVideo": "pEbsJdSFTh8",
                        "learnedVideo": false,
                        "learnedLength": -1
                    }
                ]
            },
            {
                "chapterIndex": 1,
                "chapterTitle": "Giải đề PE Prj301 - 2024 ",
                "chapterVideo": [
                    {
                        "indexVideo": 0,
                        "nameVideo": "Giải đề PE Prj301 | Spring 2024 BL5 | Java servlet",
                        "lengthVideo": 74.43,
                        "linkVideo": "ndqm3JrRTOI",
                        "learnedVideo": false,
                        "learnedLength": -1
                    },
                    {
                        "indexVideo": 1,
                        "nameVideo": "Giải đề PE Prj301 | Summer 2024 | Q1",
                        "lengthVideo": 20.85,
                        "linkVideo": "y5GxN1Qhvgs",
                        "learnedVideo": false,
                        "learnedLength": -1
                    },
                    {
                        "indexVideo": 2,
                        "nameVideo": "Giải đề PE Prj301 | Summer 2024 | Q2",
                        "lengthVideo": 28.52,
                        "linkVideo": "zRE3e44PQVo",
                        "learnedVideo": false,
                        "learnedLength": -1
                    }
                ]
            }
        ],
        "courseWillLearn": [
            {
                "willLearnId": 0,
                "willLearnContent": "Giải Đề PE Java Web: Nâng Cao Kỹ Năng Servlet và JSP",
            },
            {
                "willLearnId": 1,
                "willLearnContent": " Thực Hành Java Servlet và JSP: Giải Quyết Đề Thi PE",
            },
            {
                "willLearnId": 2,
                "willLearnContent": "Khóa Học Giải Đề PE: Phát Triển Ứng Dụng Web với Java Servlet và JSP",
            },
            {
                "willLearnId": 3,
                "willLearnContent": "Học Thực Hành Java Web: Giải Đề PE Servlet và JSP",
            }
        ],
        "courseLearned": false
    },
    {
        "courseIndex": 2,
        "courseName": "Build login google with Java | Jsp, Servlet",
        "courseImage": "./img/build_login_google.jpg",
        "courseType": "Analysis",
        "courseIntro": "https://www.youtube.com/embed/efI98nT8Ffo",
        "courseStudents": 500,
        "courseRate": 4.9,
        "coursePrice": 32.00,
        "courseVideo": [
            {
                "chapterIndex": 0,
                "chapterTitle": "Build login google",
                "chapterVideo": [
                    {
                        "indexVideo": 0,
                        "nameVideo": "Build login google with Java | Jsp, Servlet",
                        "lengthVideo": 125.5,
                        "linkVideo": "https://www.youtube.com/watch?v=Esfv2KNzlRU&t=65s",
                        "learnedVideo": false,
                        "learnedLength": -1
                    }
                ]
            }
        ],
        "courseWillLearn": [
            {
                "willLearnId": 0,
                "willLearnContent": "Cách tích hợp Google Sign-In vào ứng dụng Java sử dụng JSP và Servlet."
            },
            {
                "willLearnId": 1,
                "willLearnContent": "Các khái niệm cơ bản về OAuth 2.0 và cách hoạt động của nó trong xác thực người dùng."
            },
            {
                "willLearnId": 2,
                "willLearnContent": "Phương pháp xử lý yêu cầu và phản hồi từ Google API trong ứng dụng web."
            },
            {
                "willLearnId": 3,
                "willLearnContent": "Cách xây dựng giao diện người dùng thân thiện cho chức năng đăng nhập Google."
            }
        ],
        "courseLearned": false
    },
    {
        "courseIndex": 3,
        "courseName": "Build login facebook",
        "courseImage": "./img/build_login_facebook.jpg",
        "courseType": "build business",
        "courseIntro": "https://www.youtube.com/embed/x0fSBAgBrOQ",
        "courseStudents": 642,
        "courseRate": 4.9,
        "coursePrice": "Free",
        "courseVideo": [
            {
                "chapterIndex": 0,
                "chapterTitle": "Build login facebook by java | jsp servlet",
                "chapterVideo": [
                    {
                        "indexVideo": 0,
                        "nameVideo": "ReactJS là gì? Tại sao nên học ReactJS?",
                        "lengthVideo": 10,
                        "linkVideo": "QUE-C6-yJJI",
                        "learnedVideo": false,
                        "learnedLength": -1
                    }
                ]
            }
        ],
        "courseWillLearn": [
            {
                "willLearnId": 0,
                "willLearnContent": "Các mô hình, kiến trúc cơ bản khi triển khai ứng dụng",
            },
            {
                "willLearnId": 1,
                "willLearnContent": "Các mô hình, kiến trúc cơ bản khi triển khai ứng dụng",
            },
            {
                "willLearnId": 2,
                "willLearnContent": "Các mô hình, kiến trúc cơ bản khi triển khai ứng dụng",
            },
            {
                "willLearnId": 3,
                "willLearnContent": "Các mô hình, kiến trúc cơ bản khi triển khai ứng dụng",
            }

        ],
        "courseLearned": false
    },
    {
        "courseIndex": 4,
        "courseName": "Export pdf by javascript",
        "courseImage": "./img/popular-course4.jpg",
        "courseType": "Web Design",
        "courseIntro": "https://www.youtube.com/watch?v=7jKzVRabKm4",
        "courseStudents": 143,
        "courseRate": 3.38,
        "coursePrice": "Free",
        "courseVideo": [
            {
                "chapterIndex": 0,
                "chapterTitle": "xport pdf by javascript with 10 line",
                "chapterVideo": [
                    {
                        "indexVideo": 0,
                        "nameVideo": "Mo hinh client - Sever la gi?",
                        "lengthVideo": 125.5,
                        "linkVideo": "https://www.youtube.com/watch?v=7jKzVRabKm4",
                        "learnedVideo": false,
                        "learnedLength": -1
                    }
                ]
            }
        ],
        "courseWillLearn": [
    {
        "willLearnId": 0,
        "willLearnContent": "Hiểu hơn về cách internet và máy vi tính hoạt động."
    },
    {
        "willLearnId": 1,
        "willLearnContent": "Khám phá thư viện jsPDF và cách sử dụng nó để xuất PDF."
    },
    {
        "willLearnId": 2,
        "willLearnContent": "Thực hành viết mã JavaScript để tạo file PDF chỉ trong 10 dòng."
    },
    {
        "willLearnId": 3,
        "willLearnContent": "Nắm vững cách định dạng và tùy chỉnh nội dung trong PDF."
    }
],
        "courseLearned": false
    },
    {
        "courseIndex": 5,
        "courseName": "Tích hợp trình soạn thảo (tinymce)",
        "courseImage": "./img/tichhop_tinycme.webp",
        "courseType": "Java",
        "courseIntro": "https://www.youtube.com/watch?v=QWyabAkUuuk&t=5s",
        "courseStudents": 236,
        "courseRate": 4.5,
        "coursePrice": 'Free',
        "courseVideo": [
            {
                "chapterIndex": 0,
                "chapterTitle": "Tích hợp trình soạn thảo (tinymce) | add text editor in jsp, servlet",
                "chapterVideo": [
                    {
                        "indexVideo": 0,
                        "nameVideo": "Mo hinh client - Sever la gi?",
                        "lengthVideo": 9.04,
                        "linkVideo": "https://www.youtube.com/embed/zoELAirXMJY",
                        "learnedVideo": false,
                        "learnedLength": -1
                    }
                ]
            }
        ],
        "courseWillLearn": [
            {
                "willLearnId": 0,
                "willLearnContent": "Các kiến thức cơ bản, nền móng của ngành IT",
            },
            {
                "willLearnId": 1,
                "willLearnContent": "Các kiến thức cơ bản, nền móng của ngành IT",
            },
            {
                "willLearnId": 2,
                "willLearnContent": "Các kiến thức cơ bản, nền móng của ngành IT",
            },
            {
                "willLearnId": 3,
                "willLearnContent": "Các kiến thức cơ bản, nền móng của ngành IT",
            }

        ],
        "courseLearned": false
    },
    {
        "courseIndex": 6,
        "courseName": "Export excel by java",
        "courseImage": "./img/build_export_excel.jpg",
        "courseType": "Artificial Intelligence",
        "courseIntro": "https://www.youtube.com/watch?v=FUaGJTOCBtU",
        "courseStudents": 360,
        "courseRate": 4.9,
        "coursePrice": "Free",
        "courseVideo": [
            {
                "chapterIndex": 0,
                "chapterTitle": "Export excel by java | java servlet | sql server",
                "chapterVideo": [
                    {
                        "indexVideo": 0,
                        "nameVideo": "Mo hinh client - Sever la gi?",
                        "lengthVideo": 23.33,
                        "linkVideo": "https://www.youtube.com/watch?v=FUaGJTOCBtU",
                        "learnedVideo": false,
                        "learnedLength": -1
                    }
                ]
            }
        ],
        "courseWillLearn": [
            {
                "willLearnId": 0,
                "willLearnContent": "Biết thêm một số kỹ thuật với Javascript",
            },
            {
                "willLearnId": 1,
                "willLearnContent": "Biết thêm một số kỹ thuật với Javascript",
            },
            {
                "willLearnId": 2,
                "willLearnContent": "Biết thêm một số kỹ thuật với Javascript",
            },
            {
                "willLearnId": 3,
                "willLearnContent": "Biết thêm một số kỹ thuật với Javascript",
            }
        ],
        "courseLearned": false
    },
    {
        "courseIndex": 7,
        "courseName": "Hướng dẫn send email trong java",
        "courseImage": "./img/swp_send_mail.jpg",
        "courseType": "Web Design",
        "courseIntro": "https://www.youtube.com/watch?v=wkNwSV7ajzI&t=1364s",
        "courseStudents": 949,
        "courseRate": 5,
        "coursePrice": 'Free',
        "courseVideo": [
            {
                "chapterIndex": 0,
                "chapterTitle": "Hướng dẫn send email trong java servlet | forget password",
                "chapterVideo": [
                    {
                        "indexVideo": 0,
                        "nameVideo": "Mo hinh client - Sever la gi?",
                        "lengthVideo": 59.16,
                        "linkVideo": "https://www.youtube.com/watch?v=wkNwSV7ajzI&t=1364s",
                        "learnedVideo": false,
                        "learnedLength": -1
                    }
                ]
            }
        ],
        "courseWillLearn": [
            {
                "willLearnId": 0,
                "willLearnContent": "Các kiến thức cơ bản, nền móng của ngành IT",
            },
            {
                "willLearnId": 1,
                "willLearnContent": "Các kiến thức cơ bản, nền móng của ngành IT",
            },
            {
                "willLearnId": 2,
                "willLearnContent": "Các kiến thức cơ bản, nền móng của ngành IT",
            },
            {
                "willLearnId": 3,
                "willLearnContent": "Các kiến thức cơ bản, nền móng của ngành IT",
            }

        ],
        "courseLearned": false
    },
    {
        "courseIndex": 8,
        "courseName": "Wed201c - PE",
        "courseImage": "./img/popular-course2.jpg",
        "courseType": "Web Design",
        "courseIntro": "https://www.youtube.com/watch?v=qFAH1-4Gvg0&t=84s",
        "courseStudents": 1.044,
        "courseRate": 4.9,
        "coursePrice": 'free',
        "courseVideo": [
            {
                "chapterIndex": 0,
                "chapterTitle": "Khai niem ky thuat can biet",
                "chapterVideo": [
                    {
                        "indexVideo": 0,
                        "nameVideo": "Giải đề PE WED201c | Spring2023",
                        "lengthVideo": 63,
                        "linkVideo": "https://www.youtube.com/watch?v=qFAH1-4Gvg0&t=84s",
                        "learnedVideo": false,
                        "learnedLength": -1
                    }
                ]
            }
        ],
        "courseWillLearn": [
            {
                "willLearnId": 0,
                "willLearnContent": "Các kiến thức cơ bản, nền móng của ngành IT",
            },
            {
                "willLearnId": 1,
                "willLearnContent": "Các kiến thức cơ bản, nền móng của ngành IT",
            },
            {
                "willLearnId": 2,
                "willLearnContent": "Các kiến thức cơ bản, nền móng của ngành IT",
            },
            {
                "willLearnId": 3,
                "willLearnContent": "Các kiến thức cơ bản, nền móng của ngành IT",
            }

        ],
        "courseLearned": false
    },
    {
        "courseIndex": 9,
        "courseName": "Prn211 & Prn212 Cách cấu hình để thi PE",
        "courseImage": "./img/popular-course2.jpg",
        "courseType": "Web Design",
        "courseIntro": "https://www.youtube.com/watch?v=aUpOYI3ArTE&t=82s",
        "courseStudents": 1.178,
        "courseRate": 4.9,
        "coursePrice": 37.80,
        "courseVideo": [
            {
                "chapterIndex": 0,
                "chapterTitle": "Prn211 Cách cấu hình để thi PE",
                "chapterVideo": [
                    {
                        "indexVideo": 0,
                        "nameVideo": "Prn212 Cách cấu hình để thi PE, câu 1 Winform | Spring 2024 | .NET Entity framework",
                        "lengthVideo": 66,
                        "linkVideo": "https://www.youtube.com/watch?v=aUpOYI3ArTE&t=82s",
                        "learnedVideo": false,
                        "learnedLength": -1
                    }
                ]
            }
        ],
        "courseWillLearn": [
            {
                "willLearnId": 0,
                "willLearnContent": "Các kiến thức cơ bản, nền móng của ngành IT",
            },
            {
                "willLearnId": 1,
                "willLearnContent": "Các kiến thức cơ bản, nền móng của ngành IT",
            },
            {
                "willLearnId": 2,
                "willLearnContent": "Các kiến thức cơ bản, nền móng của ngành IT",
            },
            {
                "willLearnId": 3,
                "willLearnContent": "Các kiến thức cơ bản, nền móng của ngành IT",
            }

        ],
        "courseLearned": false
    }
]
function actionNavMenu() {
    let settingAccountBtn = document.querySelector('.setting_account-btn')
    let subMenu = document.querySelector('.nav_menu-subList')
    let navLinks = document.querySelectorAll('.nav_menu-list-item a')
    console.log(navLinks);
    let openNavBtn = document.querySelector('.nav_menu-btn')
    let navMenu = document.querySelector('.nav_menu')
    let menuNavOverLay = document.querySelector('.nav_overlay')
    openNavBtn.addEventListener('click', ()=> {
        navMenu.classList.toggle('openNavMenu')
    })
    menuNavOverLay.addEventListener('click', ()=> {
        navMenu.classList.toggle('openNavMenu')
    })
    settingAccountBtn.addEventListener('click', ()=> {
        subMenu.classList.toggle('showSubList')
        settingAccountBtn.classList.toggle('changeIcon')
    })
    navLinks.forEach((link)=> {
        link.addEventListener('click', (e)=> {
            e.preventDefault()
        })
    })
}
actionNavMenu()
  function scrollTop() {
    let scrollIcon = document.querySelector("#scroll-top .icon-scroll")
    console.log(scrollIcon);
    window.addEventListener("scroll", (e)=> {
        let scroll = this.scrollY;
        if(scroll>100) {
            scrollIcon.classList.add('activeScroll')
        }else{
            scrollIcon.classList.remove('activeScroll')
        }
    })
  }
  scrollTop()

  function getPopularCourse(popularCourse) {
    let popularContainer = document.querySelector('.courses-container'); 
    let html = ``;
    console.log(popularContainer);
    popularCourse.forEach(course => {
    html+=`
      <div class="courses-item learned-${course.courseLearned} index-${course.courseIndex}">
        <div class="courses-item__link">
          <img src="${course.courseImage}" alt="">
          <div class="actionHover">
          
          <button class="courses-item__btn" data-course-index="${course.courseIndex}">Xem khóa học</button>
          </div>
        </div>
        <div class="course-info">
            <span class="course-info__type">${course.courseType}</span>
            <h3 class="course-info__name">${course.courseName}</h3>
            <div class="course-count">
                <div class="student-count">
                  <i class="fa-regular fa-user"></i>
                  <span>${course.courseStudents}K</span>
                </div>
                <div class="star-count">
                    <i class="fa-regular fa-star"></i>
                    <span>${course.courseRate}</span>
                </div>
                <div class="price-count">
                    <i class="fa-solid fa-dollar-sign"></i>
                    <span>$${course.coursePrice}</span>
                </div>
            </div>
        </div>
     </div>
    `
    });
    popularContainer.innerHTML = html;
    actionHover()
    directCourseDetail()
 }
  function moreCoursesHanlde() {
    let endPopular = 8;
    let minCourseDis = 8;
    let maxCourseDis = popularCourses.length;
    getPopularCourse(popularCourses.slice(0, endPopular))
    let moreBtn = document.querySelector('.popular-btn__more')
     moreBtn.addEventListener('click', function(){
      if(moreBtn.innerHTML == 'Hide course') {
        endPopular-=8;
      }else{
        endPopular+=8;
      }
     if(endPopular>=popularCourses.length) {
      endPopular = maxCourseDis;
      moreBtn.innerHTML = 'Hide course'
       }else if(endPopular<minCourseDis){
      endPopular = minCourseDis;
      moreBtn.innerHTML = 'More Course'
     }
     getPopularCourse(popularCourses.slice(0, endPopular))
     console.log('end = '+endPopular+'length = '+popularCourses.length);
  });
  }
  moreCoursesHanlde()
// click erroll course and it will become a new course learned
//   function getCoursesLearned() {
//     let coursesList = document.querySelectorAll('.courses-item')
//     coursesList.forEach(courseItem=> {
//         courseItem.addEventListener('click', function() {
//             let classNames = courseItem.className.split(' ');
//             let indexClass = classNames.find(className => className.startsWith('index-'));
//             let index = indexClass[indexClass.length-1];
//             popularCourses[index-1].courseLearned = true
//             console.log(popularCourses[index-1].courseLearned);
//         })     
//     })
//   }
// getCoursesLearned();

function actionHover() {
  let coursesList = document.querySelectorAll('.courses-item')
  coursesList.forEach((course) => {
    course.addEventListener('mouseover', ()=> {
      course.querySelector('.actionHover').classList.add('activeHover')
    })
    course.addEventListener('mouseout', ()=> {
      course.querySelector('.actionHover').classList.remove('activeHover')
    })
  })
}
actionHover() 
function directCourseDetail() {
  let courseButton = document.querySelectorAll('.courses-item__btn')
  courseButton.forEach(courseItem => {
    courseItem.addEventListener('click', ()=> {
     let courseIndex = parseInt(courseItem.getAttribute("data-course-index"))
     let selectedCourse = popularCourses.find(course => course.courseIndex === courseIndex)
     window.location.href = `https://cuongtran6969.github.io/TVCsellCourse/course.html?courseIndex=`+encodeURIComponent(courseIndex)
    })
  })
}


let courseLink = document.querySelector('.courses-item__link') 
 courseLink.addEventListener('click', (e)=> {
  e.stopPropagation()
})
